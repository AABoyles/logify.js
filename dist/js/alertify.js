var Alertify=function(e,t){"use strict";var n,i=e.document;n=function(){function n(e){"undefined"!=typeof p&&e.parentNode===p&&p.removeChild(e),p.hasChildNodes()||(p.className+=" alertify-logs-hidden")}function s(e,t,n){for(var s="undefined"!=typeof n?[n]:i.styleSheets,o=0,r=s.length;r>o;o++)if(n=s[o],n.cssRules)for(var a=0,l=n.cssRules.length;l>a;a++){var c=n.cssRules[a];if(c.selectorText&&-1!==c.selectorText.split(",").indexOf(t))return c.style[e]}return null}var o,r,a,l,c,u,f,d,y,p,h,v,m,b={},g={},k=!1,E={ENTER:13,ESC:27,SPACE:32},L=[];g={buttons:{holder:'<nav class="alertify-buttons">{{buttons}}</nav>',submit:'<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',ok:'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',cancel:'<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>'},input:'<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>',message:'<p class="alertify-message">{{message}}</p>',log:'<article class="alertify-log{{class}}">{{message}}</article>'};var N,w=!1;return m=function(){if(!N){var e=i.createElement("fakeelement"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(var s in n)if(n.hasOwnProperty(s)&&e.style[s]!==t){N=n[s],w=!0;break}}return{type:N,supported:w}},o=function(e){return i.getElementById(e)},b={labels:{ok:"OK",cancel:"Cancel"},maxLogItems:3,delay:5e3,buttonReverse:!1,buttonFocus:"ok",transition:t,keydown:!1,addListeners:function(t){var n,i,s,o,u,f,d="undefined"!=typeof a,y="undefined"!=typeof r,p="undefined"!=typeof v,h="",m=this;i=function(e){e.preventDefault(),o(e),"undefined"!=typeof v&&(h=v.value),"function"==typeof t&&("undefined"!=typeof v?t(!0,h):t(!0))},s=function(e){e.preventDefault(),o(e),"function"==typeof t&&t(!1)},o=function(){m.hide(),e.removeEventListener("keyup",u),e.removeEventListener("keydown",n),e.removeEventListener("focus",f),d&&a.removeEventListener("click",i),y&&r.removeEventListener("click",s)},u=function(e){var t=e.keyCode;m.keydown=!1,t===E.SPACE&&!p||p&&t===E.ENTER?i(e):t===E.ESC&&y&&s(e)},n=function(){m.keydown=!0},f=function(){p?v.focus():!y||m.buttonReverse?a.focus():r.focus()},l.addEventListener("focus",f),c.addEventListener("focus",f),d&&a.addEventListener("click",i),y&&r.addEventListener("click",s),e.addEventListener("keyup",u),e.addEventListener("keydown",n),this.transition.supported||this.setFocus()},handleErrors:function(){if("undefined"!=typeof e.onerror){var t=this;return e.onerror=function(e,n,i){t.error("["+e+" on line "+i+" of "+n+"]",0)},!0}return!1},appendButtons:function(e,t){return this.buttonReverse?t+e:e+t},build:function(e){var t="",n=e.type,i=e.message,s=e.cssClass||"";switch(t+='<div class="alertify-dialog">',t+='<a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>',"none"===b.buttonFocus&&(t+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>'),"prompt"===n&&(t+='<div id="alertify-form">'),t+='<article class="alertify-inner">',t+=g.message.replace("{{message}}",i),"prompt"===n&&(t+=g.input),t+=g.buttons.holder,t+="</article>","prompt"===n&&(t+="</div>"),t+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>',t+="</div>",n){case"confirm":t=t.replace("{{buttons}}",this.appendButtons(g.buttons.cancel,g.buttons.ok)).replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"prompt":t=t.replace("{{buttons}}",this.appendButtons(g.buttons.cancel,g.buttons.submit)).replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"alert":t=t.replace("{{buttons}}",g.buttons.ok).replace("{{ok}}",this.labels.ok)}return y.className="alertify alertify-"+n+" "+s,d.className="alertify-cover",t},close:function(e,t){var i,o,r=t&&!isNaN(t)?+t:this.delay,a=this;e.addEventListener("click",function(){i(e)}),o=function(e){e.stopPropagation(),this.removeEventListener(a.transition.type,o),n(this)},i=function(e){var t=1;if("undefined"!=typeof e&&e.parentNode===p){if(a.transition.supported){e.addEventListener(a.transition.type,o),e.className+=" alertify-log-hide";var i=(s("transition-duration",".alertify-log-hide")||s("-webkit-transition-duration",".alertify-log-hide")||s("-moz-transition-duration",".alertify-log-hide")||s("-o-transition-duration",".alertify-log-hide")||"0").toLowerCase(),r=1;t=parseInt(i),(!t||isNaN(t))&&(t=500),i.indexOf("ms")>-1?t+=r:i.indexOf("s")>-1&&(t*=1e3,t+=r)}setTimeout(function(){n(e)},t||1)}},0!==t&&setTimeout(function(){i(e)},r)},dialog:function(e,t,n,s,o){return f=i.activeElement,this.init(),L.push({type:t,message:e,callback:n,placeholder:s,cssClass:o}),k||this.setup(),this},extend:function(e){return function(t,n,i){return this.log(t,e,n,i),this}},hide:function(){var e,t=this;L.splice(0,1),L.length>0?this.setup(!0):(k=!1,e=function(n){n.stopPropagation(),y.removeEventListener(t.transition.type,e)},this.transition.supported?(y.addEventListener(this.transition.type,e),y.className="alertify alertify-hide alertify-hidden"):y.className="alertify alertify-hide alertify-hidden alertify-isHidden",d.className="alertify-cover alertify-cover-hidden",setTimeout(function(){t.keydown?i.body.focus():f.focus()}))},init:function(){null==o("alertify-cover")&&(d=i.createElement("div"),d.setAttribute("id","alertify-cover"),d.className="alertify-cover alertify-cover-hidden",i.body.appendChild(d)),null==o("alertify")&&(k=!1,L=[],y=i.createElement("section"),y.setAttribute("id","alertify"),y.className="alertify alertify-hidden",i.body.appendChild(y)),null==o("alertify-logs")&&(p=i.createElement("section"),p.setAttribute("id","alertify-logs"),p.className="alertify-logs alertify-logs-hidden",i.body.appendChild(p)),i.body.setAttribute("tabindex","0"),this.transition=m()},log:function(e,t,n,i){this.init(),p.className="alertify-logs";var s=p.childNodes.length-this.maxLogItems;if(s>=0)for(var o=0,r=s+1;r>o;o++)this.close(p.childNodes[o],1);return this.notify(e,t,n,i),this},notify:function(e,t,n,s){var o=i.createElement("article");o.className="alertify-log"+("string"==typeof t&&""!==t?" alertify-log-"+t:""),o.innerHTML=e,"function"==typeof s&&o.addEventListener("click",s),p.appendChild(o),setTimeout(function(){o.className=o.className+" alertify-log-show"},50),this.close(o,n)},set:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},setFocus:function(){v?(v.focus(),v.select()):u.focus()},setup:function(e){var n,i=L[0],s=this;k=!0,n=function(e){e.stopPropagation(),s.setFocus(),y.removeEventListener(s.transition.type,n)},this.transition.supported&&!e&&y.addEventListener(this.transition.type,n),y.innerHTML=this.build(i),l=o("alertify-resetFocus"),c=o("alertify-resetFocusBack"),a=o("alertify-ok")||t,r=o("alertify-cancel")||t,u="cancel"===b.buttonFocus?r:"none"===b.buttonFocus?o("alertify-noneFocus"):a,v=o("alertify-text")||t,h=o("alertify-form")||t,"string"==typeof i.placeholder&&""!==i.placeholder&&(v.value=i.placeholder),e&&this.setFocus(),this.addListeners(i.callback)}},{alert:function(e,t,n){return b.dialog(e,"alert",t,"",n),this},confirm:function(e,t,n){return b.dialog(e,"confirm",t,"",n),this},extend:b.extend,init:b.init,log:function(e,t,n,i){return b.log(e,t,n,i),this},prompt:function(e,t,n,i){return b.dialog(e,"prompt",t,n,i),this},success:function(e,t,n){return b.log(e,"success",t,n),this},error:function(e,t,n){return b.log(e,"error",t,n),this},set:function(e){b.set(e)},labels:b.labels,debug:b.handleErrors}},"undefined"!=typeof module&&module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):e.alertify=new n}("undefined"!=typeof window?window:{});